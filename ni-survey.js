//code migratated from DTM

var preview = 0;
//added global variable AABeacon
var AABeacon = "";
var beaconTries = 0;
var language;
var localeCookie;
var surveyBlock;


var docDOMAIN = document.domain;
var vocLink = document.location.href.toLowerCase();
var vocReferrer = document.referrer.toLowerCase();
var deviceType = (_satellite.browserInfo.deviceType);

//Check device Type. Survey currently only runs on Desktop
var checkDevice = function() {
        if (deviceType == "Desktop") {
            return true;
        } else {
            return false;
        }

    }
    //Check for IE8
var ieTest = function(testURL) {
    if (testURL.indexOf("relyingPartyId") > -1) return false;

    if (testURL.indexOf("ni.com/comprefs/preferences") > -1) return false;
    if (navigator.appName == "Microsoft Internet Explorer" && document.documentMode == "8") return false;
    else {
        return true;
    }
}

//Filter delta (JS, false = donï¿½t show, true = show):
//var url = location.href;
var checkDelta = function(testURL) {
    if (testURL.indexOf("?") > -1) {
        testURL = testURL.split("?")[0];
    }
    if (testURL.replace(/(-test2|-test|-dev2|-dev)/, "").search(/delta.ni.com\/nipr/i) > -1) {
        return false;
    } else {
        return true;
    }
}


var checkMisc = function(domain, url, referrer) {
    if (domain.indexOf("landing") > -1) return false;
    if (domain.indexOf("lumen") > -1 && vocLink.indexOf("prodevaluation") > -1) return false;
    if (domain.indexOf("lumen") > -1 && vocLink.indexOf("prodactivation") > -1) return false;
    if (domain.indexOf("delta") > -1 && vocLink.indexOf("customer_activate_details") > -1) return false;
    if (domain.indexOf("delta") > -1 && vocLink.indexOf("extendedevaluation") > -1) return false;
    if (vocLink.indexOf("nipartslist") > -1) return false;
    if (vocLink.indexOf("labview/product-questionnaire") > -1) return false;
    if (vocLink.indexOf("?prodref=") > -1 || vocLink.indexOf("&prodref=") > -1) return false;
    if (vocReferrer.indexOf("multisim") > -1 && vocReferrer.indexOf("softonic.com") > -1) return false;
    if (vocReferrer.indexOf("beta.multisim.com") > -1) return false;
    if (vocLink.indexOf("/shop/labview/labview-nxg.html") > -1) return false;
    else { return true };
}


var surveyRegex = /(aem\-author|investor|courseware|ohm|research|joule|webcasts\.de|venus|niweek|www-preview)(-dev|-dev2|-test|-test2)?\.ni\.com/i;
var subDomainBlock = surveyRegex.test(vocLink);
var ieBlock = ieTest(vocLink);
var deltaBlock = checkDelta(vocLink);
var miscBlock = checkMisc(docDOMAIN, vocLink, vocReferrer);
var deviceBlock = checkDevice();
// console.log(vocLink);
// console.log("deviceType: " + deviceType + " so, " + deviceBlock);
// console.log("Browser OK: " + ieBlock);
// console.log("subDomainBlock: " + subDomainBlock);
// console.log("Delta OK: " + deltaBlock);
// console.log("Misc OK: " + miscBlock);
// console.log("********************");

function surveyFilter() {
    if ((!ieBlock) || (!deltaBlock) || (!miscBlock) || (!deviceBlock) || (subDomainBlock)) {
        surveyBlock = true;

    } else {
        surveyBlock = false;
        surveyInvite();
    }
}

surveyFilter();

function updateLanguage(localeCookie) {
    switch (localeCookie) {
        case "fr":
            language = "French";
            break;
        case "de":
            language = "German";
            break;
        case "ko":
            language = "Korean";
            break;
        case "en":
            language = "English";
            break;
        case "it":
            language = "Italian";
            break;
        case "ja":
            language = "Japanese";
            break;
        case "pt":
            language = "Portuguese";
            break;
        case "es":
            language = "Spanish (Latin America)";
            break;
        case "zh-CN":
            language = "Chinese (Simplified)";
            break;
        case "zh-TW":
            language = "Chinese (Traditional)";
            break;
        default:
            language = "English";
    }

}

function surveyInvite() {
    if (_satellite.getVar("VOC:URL_PARAM") == "nowyouseeme") preview = 1;
    if (_satellite.getVar("VOC:URL_PARAM") == "nowyoudont") preview = 2;
    if (_satellite.getVar("VOC:URL_PARAM") == "nopenope") preview = -1;

    /* Get new cookie type - Start */
    if (_satellite.getVar("VOC:COOKIE") == "mcxSurveyQuarantine") {
        var d = new Date();
        NIAnalytics.setCookie("mcxSurveyQuarantine", "PTW4N4:" + d.getTime(), "/");
        NIAnalytics.setCookie("mcxSurveyQuarantine", "PTW4N4:" + d.getTime(), "/", ".ni.com");
    }
    /* Get new cookie type - End */

    // console.log(preview + " and " + (_satellite.getVar("VOC:COOKIE")));
    if (preview != -1 && (preview > 0 || Math.floor((Math.random() * 100) + 1) <= 10)) {


        if (_satellite.getVar("VOC:COOKIE") == "") {

            /* Get language from metatag - Start */

            localeCookie = _satellite.getVar("LOCALE:COOKIE");
            if (localeCookie.substring(0, 2) != "zh") {
                localeCookie = localeCookie.substring(0, 2);
            }

            /* Get language from metatag - End */

            /* Generate AABeacon - Start */

            function getAABeacon() {
                beaconTries++;
                // console.log(beaconTries);
                var whitelist = ['AQB', 'mid', 'aid', 'vid', 'fid', 'AQE'];
                var foundSrc = '';
                for (var p in window) {
                    if ((p.substring(0, 4) == 's_i_') && (window[p].src)) {
                        var src = window[p].src;
                        if (src.indexOf('/b/ss/') >= 0) {
                            foundSrc = src;
                            break;
                        }
                    }
                }

                if (!foundSrc && window.document.images) {
                    for (var image_num = 0; image_num < window.document.images.length; image_num++) {
                        var src = window.document.images[image_num].src;
                        if (src.indexOf('/b/ss/') >= 0) {
                            foundSrc = src;
                            break;
                        }
                    }
                }

                if (!foundSrc) {
                    if (beaconTries < 3) {
                        getAABeacon();
                    } else if (beaconTries > 3) {
                        return '';
                    }
                }

                var mainURL = foundSrc.substring(0, foundSrc.indexOf('?'));
                var query = foundSrc.substring(foundSrc.indexOf('?') + 1);
                var filteredQuery = '';

                for (var i = 0; i < whitelist.length; i++) {
                    var v = NIAnalytics.getQueryValue(whitelist[i], query);
                    if (v) filteredQuery += (filteredQuery ? '&' : '') + whitelist[i] + '=' + v;
                }

                AABeacon = mainURL + '?' + filteredQuery;


                // console.log(AABeacon);

            }



            /* Generate AABeacon - End */

            /* Generate CustomerID - Start */

            var profileIDCookie = _satellite.getVar("PROFILE_ID:COOKIE");
            profileIDCookie = profileIDCookie != "anon" ? profileIDCookie : "Not logged in";

            /* Generate CustomerID - End */

            /* Put URL together - Start */


            function getNiSurveyURL() {
                updateLanguage(localeCookie);
                niVOCSurveyURL = "https://survey.ni.com/cgi-bin/qwebcorporate.dll?idx=PTW4N4";
                if (preview == 2) {
                    niVOCSurveyURL = niVOCSurveyURL + "&preview=1";
                }
                niVOCSurveyURL = niVOCSurveyURL + "&l=" + language;
                niVOCSurveyURL = niVOCSurveyURL + "&AABeacon=" + encodeURIComponent(AABeacon);
                niVOCSurveyURL = niVOCSurveyURL + "&CustomerID=" + profileIDCookie;
                niVOCSurveyURL = niVOCSurveyURL + "&URL=" + window.location.href;
                console.log(niVOCSurveyURL + " and language is " + language);

                return niVOCSurveyURL;

            }




            /* Put URL together - End */

            /* Calling the modal - Start */
            window.setTimeout(function() {
                getAABeacon()
                siteWideModal(_satellite.getVar("DELIVEREDBY:METATAG").search(/CMS|Commerce|Configurator/) == -1);
                var d = new Date();
                NIAnalytics.setCookie("mcxSurveyQuarantine", "PTW4N4:" + d.getTime(), "/");
                NIAnalytics.setCookie("mcxSurveyQuarantine", "PTW4N4:" + d.getTime(), "/", ".ni.com");
            }, 5000);

            /* Calling the modal - End */
        }
    }







    //VOC Surveys
    var surveyPopup;
    //var language = 'en';
    var surveyCss = "//www.ni.com/niassets/css/ni-survey.css"

    function siteWideModal(isOldPage) {
        $('<link rel="stylesheet" type="text/css" href="' + surveyCss + '" >').appendTo("head");
        getExtraKeysAndLaunch(isOldPage);
    }

    function launchSurveyModal(extraKeys, isOldPage) {
        isOldPage = (typeof(isOldPage) !== 'undefined') ? isOldPage : true;
        var newHTMLContainer = '';



        newHTMLContainer += '<div id="overlay"><div id = "analytics-ni-survey-invite"><div class = "surveyInvitation" style="display:none;">';
        newHTMLContainer += '<div class="modal-header"><div class="clearfix pnx-block-2x"><h3 class="modal-title">' + extraKeys['MODAL_TITLE'] + '</h3><svg id="analytics-close-modal" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" width="30px" height="30px" enable-background="new 0 0 600 600" xml:space="preserve""><polygon points="600,-0.24 562.513,-0.24 300.104,279.038 37.695,-0.24 0.208,-0.24 281.361,299.656 0.208,599.552 37.695,599.552 300.104,320.274 562.513,599.552 600,599.552 318.848,299.656 "></polygon><rect width="100%" height="100%" style="stroke:#fff;fill:#fff;fill-opacity:0;stroke-opacity:0;"/></svg></div></div>';
        newHTMLContainer += '<div class="pnx-block-1x">' + extraKeys['MODAL_GREETING'] + '</div>';
        newHTMLContainer += '<div class="pnx-block-1x"><strong>' + extraKeys['MODAL_EXPERIENCE'] + '</strong></div>';
        newHTMLContainer += '<div class="pnx-block-2x font-size-s">' + extraKeys['POPUP_DIRECTIONS'] + '</div>';
        newHTMLContainer += '<div class="center-block clearfix">';
        newHTMLContainer += '<span class="ni-btn ni-btn-tertiary analytics-survey-no"">' + extraKeys['MODAL_LEFT_BUTTON'] + '</span>';
        newHTMLContainer += '<span class="ni-btn ni-btn-tertiary analytics-survey-yes">' + extraKeys['MODAL_RIGHT_BUTTON'] + '</span>';
        newHTMLContainer += '</div>';
        newHTMLContainer += '</div></div></div>';
        $(newHTMLContainer).appendTo('body');
        $("div.surveyInvitation").slideDown(500);
        //$('#close-modal').css({height:titleHeight,width:titleHeight});
        $('#close-modal rect').click(function() { sayNoToSurvey('analytics-ni-survey-invite'); });
        $('.analytics-survey-yes').click(function() { sayYesToSurvey(); });
        $('.analytics-survey-no').click(function() { sayNoToSurvey('analytics-ni-survey-invite'); })
        $("#overlay").click(function() {
            //$$survey.hide();
            sayNoToSurvey('#analytics-ni-survey-invite')
        });

    }


    function sayNoToSurvey(modalClass) {
        //close modal
        $('#analytics-ni-survey-invite').hide();
        $("#overlay").hide();
    }

    function sayYesToSurvey() {
        //launch popup
        //var niVOCSurveyURL = "https://survey.ni.com/cgi-bin/qwebcorporate.dll?&idx=8TV7E6";
        var queryString = encodeURIComponent(getNiSurveyURL());
        surveyPopup = window.open('//www.ni.com/apps/surveys/vocsurvey2015.html?lang=' + language + '&surl=' + queryString, 'SurveyModal', 'width=800,height=450,location=no,resizable=yes,titlebar=no,menubar=no');
        sayNoToSurvey('#survey-launch-modal');
    };

    function getSurveyLanguage() {
        language = (($.cookie("locale") !== null) && (typeof($.cookie("locale")) !== 'undefined')) ? $.cookie("locale") : 'en';
        if (language.substring(0, 2) == "zh") {
            if (language == "zh-CN") language = "zhs";
            if (language == "zh-TW" || language == "zh-HK") language = "zht";
        }
        language = language.replace(/\-.*/, "");

        return language;
    }

    function getExtraKeysAndLaunch(isOldPage) {
        var lang = getSurveyLanguage();
        //TODO: Use the below line with the '/' when going back to proxy.
        //	var lang = getSurveyLanguage() + '/';
        //	var x = location.hostname;
        //	console.log(x);

        //TODO:  Swap the following with the commented out code, after proxy can work cross domain
        launchSurveyModal(hardTranslation(lang), isOldPage);
        //var hardEngData = hardTranslation(lang);
        //
        //$.ajax({
        //	url: "//www.ni.com/extra-delivery-proxy/translation/Set/1.0/"+lang+"VOC-SURVEYS.json",
        //	context: document.body,
        //	timeout: 10000,
        //	success: function(data) {
        //		if ((typeof(data['MODAL_EXPERIENCE']) == 'undefined') || (data['MODAL_EXPERIENCE'] == 'undefined'))
        //		{
        //			launchSurveyModal(hardEngData, isOldPage);
        //		}
        //		else
        //		{
        //			launchSurveyModal(data, isOldPage);
        //		}
        //	},
        //	error: function() {
        //		launchSurveyModal(hardEngData, isOldPage);
        //	}
        //});
    }

    function hardTranslation(lang) {
        var translation = {
            "MODAL_TITLE": "We welcome your feedback!",
            "MODAL_EXPERIENCE": "This survey is designed to measure your entire ni.com experience and so will appear at the end of your visit.",
            "MODAL_POPUP_INFO": "This survey is conducted by an independent company, on behalf of National Instruments.",
            "MODAL_LEFT_BUTTON": "No, thanks",
            "MODAL_RIGHT_BUTTON": "Yes, I'll help",
            "POPUP_LEAVE_OPEN": "Please leave this window open.",
            "POPUP_DIRECTIONS": "When you have finished using ni.com, please switch back to this window to complete the survey.  For now, please click in the ni.com window to continue your session.",
            "POPUP_THANK_YOU": "Thank you for sharing your feedback.",
            "MODAL_GREETING": "Thank you for visiting ni.com today.  In order to ensure we provide you with the best experience, we would like your feedback regarding this visit, so we can continuously improve."
        };
        var langMap = {
            zh: { //using Chinese Simplified when Traditional and Simplified aren't deliniated between.
                "MODAL_TITLE": "æ¬¢è¿æä¾æ¨çåé¦ï¼",
                "MODAL_EXPERIENCE": "æ¬è°æ¥æ¨å¨äºè§£æ¨çæ´ä½ni.comä½éªï¼å æ­¤è°æ¥ä¼å¨æ¨ç»æè®¿é®ä¹ååºç°ã",
                "MODAL_POPUP_INFO": "æ¬è°æ¥ç±ä¸ä¸ªç¬ç«çå¬å¸ä»£è¡¨NIæ§è¡ã",
                "MODAL_LEFT_BUTTON": "ä¸, è°¢è°¢",
                "MODAL_RIGHT_BUTTON": "åä¸è°æ¥",
                "POPUP_LEAVE_OPEN": "è¯·ä¿ææ¬çªå£å¤äºæå¼ç¶æã",
                "POPUP_DIRECTIONS": "å½æ¨è®¿é®ni.comç»æåï¼è¯·è¿åå°æ¬çªå£å¡«åè°æ¥ã ç°å¨ï¼æ¨å¯ä»¥ç¹å»ni.comçªå£ç»§ç»­æ¨çè®¿é®ã",
                "POPUP_THANK_YOU": "éå¸¸æè°¢æ¨çåé¦ã",
                "MODAL_GREETING": "æè°¢æ¨ä»å¤©è®¿é®ni.comã ä¸ºäºç¡®ä¿ä¸ºæ¨æä¾æä½³çä½éªï¼æä»¬å¸æäºè§£æ¨å¯¹æ¬æ¬¡è®¿é®çåé¦ä»¥ä¾¿æä»¬æç»­æ¹è¿ã"
            },
            zhs: {
                "MODAL_TITLE": "æ¬¢è¿æä¾æ¨çåé¦ï¼",
                "MODAL_EXPERIENCE": "æ¬è°æ¥æ¨å¨äºè§£æ¨çæ´ä½ni.comä½éªï¼å æ­¤è°æ¥ä¼å¨æ¨ç»æè®¿é®ä¹ååºç°ã",
                "MODAL_POPUP_INFO": "æ¬è°æ¥ç±ä¸ä¸ªç¬ç«çå¬å¸ä»£è¡¨NIæ§è¡ã",
                "MODAL_LEFT_BUTTON": "ä¸, è°¢è°¢",
                "MODAL_RIGHT_BUTTON": "åä¸è°æ¥",
                "POPUP_LEAVE_OPEN": "è¯·ä¿ææ¬çªå£å¤äºæå¼ç¶æã",
                "POPUP_DIRECTIONS": "å½æ¨è®¿é®ni.comç»æåï¼è¯·è¿åå°æ¬çªå£å¡«åè°æ¥ã ç°å¨ï¼æ¨å¯ä»¥ç¹å»ni.comçªå£ç»§ç»­æ¨çè®¿é®ã",
                "POPUP_THANK_YOU": "éå¸¸æè°¢æ¨çåé¦ã",
                "MODAL_GREETING": "æè°¢æ¨ä»å¤©è®¿é®ni.comã ä¸ºäºç¡®ä¿ä¸ºæ¨æä¾æä½³çä½éªï¼æä»¬å¸æäºè§£æ¨å¯¹æ¬æ¬¡è®¿é®çåé¦ä»¥ä¾¿æä»¬æç»­æ¹è¿ã"
            },
            zht: {
                "MODAL_TITLE": "æ­¡è¿æ¨æä¾æ³æ³èå»ºè­°ï¼",
                "MODAL_EXPERIENCE": "éä»½åå·èª¿æ¥æ¯çºäºè©ä¼°æ¨ä½¿ç¨ ni.com çæ´é«çæ³èè¨­è¨çï¼æå¨æ¨é¢éç¶²ç«çæååºç¾ã",
                "MODAL_POPUP_INFO": "éä»½åå·èª¿æ¥ç±ä¸å®¶ç¨ç«å¬å¸ä»£è¡¨ NI åå®¶åå¨èå·è¡ã",
                "MODAL_LEFT_BUTTON": "ä¸ç¨äºï¼è¬è¬	",
                "MODAL_RIGHT_BUTTON": "æé¡æåå©å¡«å¯«",
                "POPUP_LEAVE_OPEN": "è«å¿ééæ­¤è¦çªã",
                "POPUP_DIRECTIONS": "ç¶æ¨é¢é ni.com çæåï¼è«åæè³æ­¤è¦çªä»¥ä¾¿å®æåå·ãç¾å¨è«é»é¸ ni.com è¦çªï¼ç¹¼çºå°æ¾æ¨æéçè³è¨ã",
                "POPUP_THANK_YOU": "æè¬æ¨åäº«å¯¶è²´çæè¦ã",
                "MODAL_GREETING": "æè¬æ¨ä»å¤©é è¨ª ni.comãçºäºæä¾æå¥½çæåçµ¦æ¨ï¼å¸ææ¨å¯ä»¥éå°éæ¬¡çç¶é©æä¾æè¦ææ³æ³ï¼å¹«å©æåæçºæ¹é²ã"
            },
            fr: {
                "MODAL_TITLE": "Nous accordons beaucoup d'importance Ã  votre opinion!",
                "MODAL_EXPERIENCE": "Cette enquÃªte est destinÃ©e Ã  mesurer votre degrÃ© de satisfaction sur notre site ni.com et s'affichera au terme de votre visite.",
                "MODAL_POPUP_INFO": "Cette enquÃªte est organisÃ©e par une sociÃ©tÃ© indÃ©pendante, au nom de National Instruments.",
                "MODAL_LEFT_BUTTON": "Non, merci.",
                "MODAL_RIGHT_BUTTON": "Oui, j'accepte",
                "POPUP_LEAVE_OPEN": "Veuillez laisser cette fenÃªtre ouverte.",
                "POPUP_DIRECTIONS": "Ã la fin de votre visite sur ni.com, veuillez revenir sur cette page pour renseigner l'enquÃªte. Pour l'instant, cliquez sur la fenÃªtre ni.com pour continuer votre visite.",
                "POPUP_THANK_YOU": "Merci de nous faire part de vos remarques.",
                "MODAL_GREETING": "Nous vous remercions de votre visite sur ni.com. Afin de vous assurer les meilleurs services et amÃ©liorer la qualitÃ© de notre site, nous aimerions connaÃ®tre vos commentaires sur la qualitÃ© de votre visite."
            },
            es: {
                "MODAL_TITLE": "Â¡Agradecemos sus comentarios!",
                "MODAL_EXPERIENCE": "Esta encuesta estÃ¡ diseÃ±ada para valorar su experiencia en ni.com y aparecerÃ¡ al finalizar su visita.",
                "MODAL_POPUP_INFO": "Esta encuesta es realizada por una compaÃ±Ã­a independiente, en nombre de National Instruments.",
                "MODAL_LEFT_BUTTON": "No, gracias",
                "MODAL_RIGHT_BUTTON": "SÃ­, quiero participar",
                "POPUP_LEAVE_OPEN": "Por favor deje esta ventana abierta.",
                "POPUP_DIRECTIONS": "Al terminar de navegar en ni.com, por favor regrese a esta ventana para responder la encuesta. Por ahora haga clic en la ventana de ni.com para continuar con su sesiÃ³n.",
                "POPUP_THANK_YOU": "Gracias por compartir su opiniÃ³n.",
                "MODAL_GREETING": "Gracias por su visita de hoy a ni.com. Con el fin de garantizar que le brindamos la mejor experiencia, nos gustarÃ­a conocer sus comentarios sobre esta visita, y asÃ­ poder mejorar continuamente."
            },
            de: {
                "MODAL_TITLE": "Wir freuen uns auf Ihre Meinung!",
                "MODAL_EXPERIENCE": "Wir mÃ¶chten erfahren, wie zufrieden Sie mit unserer Website sind. Daher laden wir Sie zu einer Umfrage ein, an der Sie bei Verlassen der Website teilnehmen kÃ¶nnen.",
                "MODAL_POPUP_INFO": "Die Umfrage wird durch ein unabhÃ¤ngiges Unternehmen im Namen von National Instruments durchgefÃ¼hrt.",
                "MODAL_LEFT_BUTTON": "Nein danke",
                "MODAL_RIGHT_BUTTON": "Ja, ich nehme teil",
                "POPUP_LEAVE_OPEN": "Bitte lassen Sie dieses Fenster geÃ¶ffnet.",
                "POPUP_DIRECTIONS": "Wenn Sie ni.com verlassen, wechseln Sie bitte zu diesem Fenster zurÃ¼ck, um an der Umfrage teilzunehmen. Klicken Sie nun zunÃ¤chst auf das ni.com-Fenster, um Ihre Sitzung fortzusetzen.",
                "POPUP_THANK_YOU": "Vielen Dank fÃ¼r Ihr Feedback!",
                "MODAL_GREETING": "Wir bedanken uns fÃ¼r Ihren Besuch auf ni.com. Damit wir Sie jederzeit optimal mit Informationen versorgen und unseren Internetauftritt weiter optimieren kÃ¶nnen, bitten wir Sie um Ihre Erfahrungen bei diesem Besuch."
            },
            it: {
                "MODAL_TITLE": "La tua opinione Ã¨ importante!",
                "MODAL_EXPERIENCE": "Questo sondaggio ha lo scopo di valutare il tuo livello di soddisfazione relativo al sito ni.com e potrai compilarlo al termine della consultazione.",
                "MODAL_POPUP_INFO": "Questo sondaggio Ã¨ condotto da una societÃ  esterna per conto di National Instruments.",
                "MODAL_LEFT_BUTTON": "No, grazie",
                "MODAL_RIGHT_BUTTON": "SÃ¬, desidero partecipare",
                "POPUP_LEAVE_OPEN": "Si prega di lasciare questa finestra aperta.",
                "POPUP_DIRECTIONS": "Quando hai terminato la tua visita su ni.com, ritorna su questa finestra per partecipare al sondaggio. Per il momento, fai clic sulla finestra ni.com per continuare la consultazione.",
                "POPUP_THANK_YOU": "Ti ringraziamo per averci inviato i tuoi commenti.",
                "MODAL_GREETING": "Grazie per aver visitato ni.com Per assicurarci di poterti fornire la migliore esperienza su ni.com, vorremmo conoscere la tua opinione a riguardo."
            },
            ko: {
                "MODAL_TITLE": "NIë ê·íì ìê²¬ì ì¡´ì¤í©ëë¤.",
                "MODAL_EXPERIENCE": "ë³¸ ì¤ë¬¸ì¡°ì¬ë ni.com ì¹ì¬ì´í¸ ì¬ì©ì ëí ê·íì ìê²¬ì ë£ê³ ì ë§ë ¨ëìì¼ë©° ì¹ì¬ì´í¸ ë°©ë¬¸ ë§ì§ë§ì ì¤ë¬¸ì¡°ì¬ì ì°¸ì¬í  ì ììµëë¤.",
                "MODAL_POPUP_INFO": "ë³¸ ì¤ë¬¸ì¡°ì¬ë NIë¥¼ ëì íì¬ ëë¦½ ìì²´ìì ì¤ìí©ëë¤.",
                "MODAL_LEFT_BUTTON": "ìëì¤.",
                "MODAL_RIGHT_BUTTON": "ë¤, ì°¸ì¬íê² ìµëë¤.",
                "POPUP_LEAVE_OPEN": "ë³¸ ì°½ì ê³ì ì´ì´ëì­ìì¤.",
                "POPUP_DIRECTIONS": "ni.com ì¹ì¬ì´í¸ë¥¼ ì¬ì©íì  íì ë³¸ ì°½ì¼ë¡ ëìì ì¤ë¬¸ì¡°ì¬ì ìí´ì£¼ì­ìì¤. ì§ê¸ì ni.com ì°½ì í´ë¦­íì¬ ê³ì ì§ííì­ìì¤.",
                "POPUP_THANK_YOU": "í¼ëë°±ì ì£¼ìì ê°ì¬í©ëë¤.",
                "MODAL_GREETING": "ni.comì ë°©ë¬¸í´ ì£¼ìì ê°ì¬í©ëë¤. ì¤ë ë°©ë¬¸ê³¼ ê´ë ¨ë í¼ëë°±ì ì£¼ìë©´ ì í¬ê° ì¬ë¬ë¶ë¤ê» ì§ìì ì¼ë¡ ìµìì ìë¹ì¤ë¥¼ ì ê³µíëë° ëìì´ ë©ëë¤."
            },
            ja: {
                "MODAL_TITLE": "ãæè¦ããèãããã ãã	",
                "MODAL_EXPERIENCE": "ãã®ã¢ã³ã±ã¼ãã¯NIãµã¤ãã®ä½¿ãããããææ¡ãããã¨ãç®çã¨ãã¦ããããããå®¢æ§ãå®éã«å½ãµã¤ãããè¦§ã«ãªã£ãå¾ã«ååº¦è¡¨ç¤ºãã¦ãã ããã",
                "MODAL_POPUP_INFO": "ãã®ã¢ã³ã±ã¼ãã¯ãã·ã§ãã«ã¤ã³ã¹ãã«ã¡ã³ãããå§è¨ãããèª¿æ»ä¼ç¤¾ãä»£ããã«å®æ½ãã¦ããã¾ãã",
                "MODAL_LEFT_BUTTON": "åå ããªã	",
                "MODAL_RIGHT_BUTTON": "åå ãã",
                "POPUP_LEAVE_OPEN": "ãã®ã¦ã£ã³ãã¦ã¯éããªãã§ãã ããã",
                "POPUP_DIRECTIONS": "NIãµã¤ãããè¦§ã«ãªã£ãå¾ããã®ã¦ã£ã³ãã¦ã«åãæ¿ãã¦ã¢ã³ã±ã¼ãã«ãåç­ãã ãããã§ã¯ãNIãµã¤ãåãã¯ãªãã¯ãã¦ãã»ãã·ã§ã³ãåéãã¦ãã ããã",
                "POPUP_THANK_YOU": "ãæè¦ããèããããã ãããããã¨ããããã¾ãã",
                "MODAL_GREETING": "ãã·ã§ãã«ã¤ã³ã¹ãã«ã¡ã³ãï¼NIï¼ãµã¤ãããè¦§ããã ãã¾ãã¦ãããã¨ããããã¾ããçæ§ã«ããä¾¿å©ã«å½ãµã¤ãããå©ç¨ããã ããããä»å¾ã®åè³ªåä¸ã«åãã¦ãä»åã®ãå©ç¨ã«é¢ãã¦ãæè¦ãããã ãããå­ãã¾ãã"
            },
            pt: {
                "MODAL_TITLE": "Sua opiniÃ£o Ã© muito importante para nÃ³s!",
                "MODAL_EXPERIENCE": "Como essa pesquisa tem como objetivo medir sua experiÃªncia completa no site ni.com, ela serÃ¡ apresentada ao final de sua visita.",
                "MODAL_POPUP_INFO": "Essa pesquisa de satisfaÃ§Ã£o Ã© realizada por uma empresa independente, em nome da National Instruments",
                "MODAL_LEFT_BUTTON": "NÃ£o, obrigado",
                "MODAL_RIGHT_BUTTON": "Sim, quero participar",
                "POPUP_LEAVE_OPEN": "Para participar, mantenha esta janela aberta.",
                "POPUP_DIRECTIONS": "ApÃ³s ter utilizado o site ni.com, pedimos que vocÃª volte a esta janela, para responder Ã  pesquisa. Para continuar sua visita, clique na janela do site ni.com.",
                "POPUP_THANK_YOU": "Obrigado por enviar a sua opiniÃ£o.",
                "MODAL_GREETING": "Obrigado por sua visita ao site ni.com. GostarÃ­amos de receber sua opiniÃ£o sobre esta visita, para podermos melhorar cada vez mais a sua experiÃªncia de usuÃ¡rio."
            }
        };

        var translationsValues = langMap[lang];
        translation = (typeof(translationsValues) !== 'undefined') ? translationsValues : translation;


        return translation;
    }
}

///* For hand-testing the survey modal */
//$(document).ready(function(){
//	prepareSurveyModal();
//});
//
//












//#######################################################################################//
// The NI survey displays an invitation inline on a website to take a survey. If the respondent agrees, the survey is displayed. In both cases, a cookie is placed on the respondents machine, so that they are not over surveyed. 
//The first set of parameters allows one to customize the invitation and the survey.
//displayAlways: Set to yes for demo purposes. In this case, a cookie is not placed and the invitation will be displayed on each visit.
//surveyURL: The URL to the survey. IMPORTANT: Confirm the survey is published and active before referring to it
//css: This is the location to the CSS file that displays the look and feel of the survey invitation
//invitationDiv: This has various properties for the invitation that is displayed
//showCookie: Add a cookie if the respondent agrees to take the survey (clicks Yes on the invitation)
//noShowCookie: Add a cookie if the respondent does not agree to take the survey (clicks No on the invitation
//invitationText: The text of the invitation. 
//#######################################################################################//


//TOP TEN SURVEY
//function niSurveyModal()
//{
//     var d = new Date();
//     //$.cookie("topTasksSurvey", "TOPTASKS", "/");
//	$$survey.init();
//}	
//
//
//var surveyPreview = "";
//if (_satellite.getVar("TT_VOC:URL_PARAM") == "practice")  surveyPreview = "&preview=1";
//if (_satellite.getVar("TT_VOC:URL_PARAM") == null)  surveyPreview = "";
//
//    /* Calling the modal - Start */
////
////window.setTimeout(function() {
////      
////      niSurveyModal()
//          //var d = new Date();
//          //$.cookie("topTasksSurvey", "TOPTASKS:" + d.getTime(), "/");
////      NIAnalytics.setCookie("topTasksSurvey", "TOPTASKS:" + d.getTime(), "/");
////      NIAnalytics.setCookie("topTasksSurvey", "TOPTASKS:" + d.getTime(), "/", ".ni.com");
////    }, 5000);
////    
// 
//
//var $$handle;
//var $$survey = {
//    displayAlways: "no",
//     surveyURL:"https://survey.ni.com/cgi-bin/qwebcorporate.dll?&idx=8TV7E6" + surveyPreview,
//    css: {	
//	location:"//www.ni.com/niassets/css/ni-survey.css",
//    },
//    showCookie: {
//	name:"showCookie",
//	value:"show",
//	expires:"60",
//    },
//    noShowCookie: {
//	name:"noShowCookie",
//	value:"hide",
//	expires:"60",
//    },
//    
//     invitationText: "<span class = 'invite'><h3>Tell Us What's Important To You</h3>NI would like to know more about our customers' most important tasks, so we can improve your web experience. This survey will take about three to five minutes to complete.<br><br><span class='ni-btn ni-btn-tertiary survey-yes'  onclick = '$$survey.show();'>YES, I'LL HELP</span><span class='ni-btn ni-btn-tertiary survey-no' onclick = '$$survey.hide();'>NO, THANKS</span></span>",
//    
//    invite: function(){
//	if (!this.readCookie(this.noShowCookie.name))
//	{
//	    strInvitation = "<div id = 'ni-survey-invite' class = 'surveyInvitation' style = 'display:none'>" + this.invitationText + "</div>";
//	    $(strInvitation).appendTo('body');
//	    //Add other details about how the invitation will appear here. 
//	    $("div.surveyInvitation").delay(1200).slideDown(500);
//	}
//    },
//    
//    show: function(event) {
//	if(!this.displayAlways){this.setCookie(this.showCookie);}
//     
//    //var strURL = this.surveyURL;
//      $("#ni-survey-invite").slideUp(500);
//     window.open(this.surveyURL);
//},
//
//
//    hide: function() {
//	if(!this.displayAlways){this.setCookie(this.noShowCookie);}
//	$("#ni-survey-invite").slideUp(500);
//
//    },
//
//    setCookie: function(cookie) {
//	name=cookie.name;
//	value=cookie.value;
//	days=cookie.expires;
//	if (days) {
//	    var date = new Date();
//	    date.setTime(date.getTime()+(days*24*60*60*1000));
//	    var expires = "; expires="+date.toGMTString();
//	}
//	else var expires = "";
//	document.cookie = name+"="+value+expires+"; path=/";
//    },
//
//    readCookie: function(name) {
//	var nameEQ = name + "=";
//	var ca = document.cookie.split(';');
//	for(var i=0;i < ca.length;i++) {
//	    var c = ca[i];
//	    while (c.charAt(0)==' ') c = c.substring(1,c.length);
//	    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
//	}
//	return null;
//    },
//
//    eraseCookie: function(name) {
//	this.setCookie(name,"",-1);
//    },
//    
//    //All initialization for survey goes in here
//    init: function() {
//		$('<link rel="stylesheet" type="text/css" href="'+this.css.location+'" >').appendTo("head");
//		this.invite();
//    }
//    
//}; 
//